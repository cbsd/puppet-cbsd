# Managed by Puppet
# DO NOT EDIT THIS FILE. PLEASE USE INSTEAD:
# cbsd bconfig name=<%= @name %>
#
# Bhyve minimal configuration:
emulator="bhyve";

relative_path="1";
jname="<%= @name %>";
emulator="bhyve";
rcconf="<%= @workdir %>/jails-rcconf/rc.conf_<%= @name %>";
data="<%= @workdir %>/jails-data/<%= @name %>-data";
path="<%= @workdir %>/jails/<%= @name %>";
rcconf="<%= @workdir %>/jails-rcconf/rc.conf_<%= @name %>";

# FQDN for environment
host_hostname="<%= @host_hostname %>";
# default environment IP
ip4_addr="<%= @ip4_addr %>";

# defaultrouter in /etc/rc.conf?
<% if @ci_gw4 -%>
ci_gw4="<%= @ci_gw4 %>";
<% end -%>

# start with system boot?
astart="<%= @astart %>";

# first NIC hardware address
nic_hwaddr="";

# create from ZFS snapshot?
zfs_snapsrc="";
zfs_encryption="";
# run immediately upon creation
runasap="0";
# bind to interface
interface="<%= @interface %>";
rctl_nice="1"
# first disk size
imgsize="<%= @imgsize %>";
# number of vcpu
vm_cpus="1";
# ram amount
vm_ram="<%= @vm_ram %>";
# profile os type
vm_os_type="<%= @vm_os_type %>";
# vm defaults/setting profile
vm_os_profile="<%= @vm_os_profile %>";
# end of Bhyve minimal configuration

# disk type - md or zvol
imgtype="zvol";
# VNC port
vm_vnc_port="0";
# bhyve flags
bhyve_generate_acpi="1";
# bhyve flags
bhyve_wire_memory="0";
# bhyve flags
bhyve_rts_keeps_utc="0";
# bhyve flags
bhyve_force_msi_irq="0";
# bhyve flags
bhyve_x2apic_mode="0";
# bhyve flags
bhyve_mptable_gen="1";
# bhyve flags
bhyve_ignore_msr_acc="0";
# wait for VNC connect when boot from CD 
cd_vnc_wait="1";
# VNC resolution
bhyve_vnc_resolution="1024x768";
# VNC bind addr
bhyve_vnc_tcp_bind="127.0.0.1";
# vgaconf settings
bhyve_vnc_vgaconf="io";
# first NIC driver
nic_driver="";
# password for VNC
vnc_password='cbsd';
# automatically eject CD when boot from CD and hard-disk is not empty
media_auto_eject="1";
# cpu topology name
vm_cpu_topology="default";
# run via debugger
debug_engine="none";

# create from ZFS snapshot?
zfs_snapsrc="";
zfs_encryption="";
# run immediately upon creation
runasap="0";

# jailed bhyve ?
jailed="0";
# chrooted bhyve ?
chrooted="0";
# custom behavior settings by exit codes
on_poweroff="destroy";
# custom behavior settings by exit codes
on_reboot="restart";
# custom behavior settings by exit codes
on_crash="destroy";
# sound hardware
soundhw="";
soundhw_play="";
soundhw_rec="";
mnt_start="0";
mnt_stop="0";
# compatible for double ACPI poweroff?
double_acpi="1";
virtio_rnd="1";
uuid="0";

# alternative bhyve stop wrapper
bhyverun_wrapper="/usr/local/cbsd/share/bhyverun.sh"
# alternative bhyve start wrapper
bhyvestop_wrapper="0"
# alternative bhyve cmd
bhyve_cmd="/usr/sbin/bhyve";

# cloud-init settings
ci_jname='<%= @name %>';
ci_fqdn='<%= @host_hostname %>';
ci_interface='<%= @interface %>';
#ci_interface_mtu='1450';
ci_ip4_addr='<%= @ip4_addr %>';
ci_gw4='<%= @ci_gw4 %>';
#ci_ip4_addr2='';
#ci_gw42='2a01:4f8:201:3ed::2';
#ci_nameserver_address='8.8.8.8';
#ci_nameserver_search='my.domain';
#ci_adjust_inteface_helper='0';
